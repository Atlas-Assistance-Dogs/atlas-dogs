<template>
    <c-related-object-cmp
        title="Files"
        icon-name="standard:folder"
        total={total}
        record-id={recordId}
        object-api-name={objectApiName}
        related-object={relatedObject}
        aura-comp-name="AllRelatedFilesCmp"
        view-all={viewAll}
    >
        <div slot="actions">
            <div class="actions">
                <lightning-pill-container
                    items={filterPills}
                    onitemremove={handleItemRemove}
                >
                </lightning-pill-container>
                <lightning-button
                    label="Filter"
                    title="Filter"
                    icon-name="standard:filter"
                    onclick={handleFilter}
                    if:true={data}
                >
                </lightning-button>
                <!-- lightning button for upload files modal -->
                <lightning-button
                    label="Upload Files"
                    title="Upload Files"
                    onclick={openModal}
                >
                </lightning-button>
            </div>
            <c-file-upload-cmp
                object-id={recordId}
                onupdate={handleUpdate}
            ></c-file-upload-cmp>
            <c-file-update-cmp
                object-id={recordId}
                onupdate={handleUpdate}
            ></c-file-update-cmp>
            <c-select-option-cmp
                title="Filter Files"
                items={filterItems}
                onselected={handleFilterSelect}
            ></c-select-option-cmp>
        </div>
        <div slot="list">
            <template if:true={data}>
                <lightning-datatable
                    data={data}
                    columns={columns}
                    hide-checkbox-column
                    key-field="recordId"
                    default-sort-direction={defaultSortDirection}
                    sorted-direction={sortDirection}
                    sorted-by={sortedBy}
                    onsort={handleSort}
                    onrowaction={handleRowAction}
                    onheaderaction={handleHeaderAction}
                >
                </lightning-datatable>
            </template>
        </div>
    </c-related-object-cmp>
</template>
